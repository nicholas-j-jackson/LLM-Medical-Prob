<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claim Annotation</title>
    <style>
        body { font-family: Arial, sans-serif; }
        img { max-width: 600px; height: auto; margin-bottom: 20px; }
        form { margin-top: 20px; }
        .claim { margin-bottom: 20px; }
        .navigation { margin-top: 20px; }
        button { margin: 5px; }
        .progress-bar {
            width: 100%;
            background-color: #f3f3f3;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .progress {
            height: 20px;
            background-color: #4caf50;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>LLM Proability Annotations ({{ index + 1 }}/{{ total }})</h1>

    <!-- Instructions -->
    <div class="instructions">
        <h3>Instructions:</h3>
        <p>You are an annotator tasked with evaluating statements generated by a LLM. Your goal is to identify 3 attributes of the LLM responses:</p>
        <ul>
            <li><b>1:</b> Whether the LLM provided a probability (ideally a range) that applies to the individual who asked the question.</li>
            <p></p>
            <li><b>2:</b> If so, what were the probabilities. The LLM may provide a range of probabilities, a point estimate, or an upper or lower bound. For a range enter the lower and upper ends in the two boxes, for a single point estimate enter the point estimate twice (1x for each box), and if only an upper or lower bound is provided, provide them as the lower/upper end of the range, respectively. 
                That is, if the LLM says something like "less than 40%, enter 40% in the right box and leave the left box empty." (and vice versa for greater than & the left box).</li>
        </ul>
        
        <p><b>IMPORTANT:</b> Make sure to click on the "Submit and Next" button to save the results!</p>
    </div>

    <form method="POST">
        <div class="boxes">
            <p><b>{{ text['response'].iloc[index] }}</b></p>
            Does this response provide probabilities: <label><input type="checkbox" name="prob_true_{{ index }}" value=True {% if text["Prob_Included_Human"].values[index] %} checked {% endif %}> True</label>
            <label><input type="checkbox" name="prob_false_{{ index }}" value=False {% if not text["Prob_Included_Human"].values[index] %} checked {% endif %}> False</label>
        <p></p>
        <button type="submit">Submit and Next</button>
    </form>

    <!-- Progress Bar -->
    <div class="progress-bar">
        <div class="progress" style="width: {{ progress }}%;"></div>
    </div>
    <p>Progress: {{ progress|round(1) }}%</p>

    <!-- Navigation -->
    <div class="navigation">
        {% if previous_index is not none %}
        <a href="/{{ previous_index }}"><button type="button">Previous Item</button></a>
        {% endif %}
        {% if next_unlabeled_index is not none %}
        <a href="/{{ next_unlabeled_index }}"><button type="button">Next Unlabeled</button></a>
        {% endif %}
    </div>
</body>
</html>
